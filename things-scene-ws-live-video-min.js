!function t(i,e,M){function o(s,u){if(!e[s]){if(!i[s]){var c="function"==typeof require&&require;if(!u&&c)return c(s,!0);if(n)return n(s,!0);var y=new Error("Cannot find module '"+s+"'");throw y.code="MODULE_NOT_FOUND",y}var g=e[s]={exports:{}};i[s][0].call(g.exports,function(t){var e=i[s][1][t];return o(e?e:t)},g,g.exports,t,i,e,M)}return e[s].exports}for(var n="function"==typeof require&&require,s=0;s<M.length;s++)o(M[s]);return o}({1:[function(t,i,e){"use strict";function M(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=t("./ws-live-video");Object.defineProperty(e,"WSLiveVideo",{enumerable:!0,get:function(){return M(o)["default"]}})},{"./ws-live-video":2}],2:[function(t,i,e){"use strict";function M(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")}function o(t,i){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!i||"object"!=typeof i&&"function"!=typeof i?t:i}function n(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Super expression must either be null or a function, not "+typeof i);t.prototype=Object.create(i&&i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),i&&(Object.setPrototypeOf?Object.setPrototypeOf(t,i):t.__proto__=i)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,i){for(var e=0;e<i.length;e++){var M=i[e];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(t,M.key,M)}}return function(i,e,M){return e&&t(i.prototype,e),M&&t(i,M),i}}(),u=scene,c=u.Component,y=u.Rect,g=function(t){function i(){return M(this,i),o(this,Object.getPrototypeOf(i).apply(this,arguments))}return n(i,t),s(i,[{key:"_draw",value:function(t){if(this._ctx=t,!this._player){var i=new WebSocket(this.model.url);this._player=new jsmpeg(i,{ondecodeframe:this.drawDecoded.bind(this)})}if(this._isPlaying)t.drawImage(this._player.canvas,0,0,this._player.width,this._player.height,this.model.left,this.model.top,this.model.width,this.model.height),this._isHover&&this.drawStopButton(t);else{var e=this.model,M=e.left,o=e.top,n=e.width,s=e.height;t.beginPath(),t.rect(M,o,n,s),this.drawFill(t),this.drawSymbol(t),this.drawPlayButton(t)}this.drawComponentFrame(t)}},{key:"drawSymbol",value:function(t){var i=new Image;i.src="data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTYuMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgd2lkdGg9IjUxMnB4IiBoZWlnaHQ9IjUxMnB4IiB2aWV3Qm94PSIwIDAgMzQ3Ljg0NiAzNDcuODQ2IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzNDcuODQ2IDM0Ny44NDY7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4KPGc+Cgk8Zz4KCQk8Zz4KCQkJPHBhdGggZD0iTTI1OS4wOTUsMjcwLjkxM2MzOC40OS0yNi45NjIsNjMuNzExLTcxLjU5LDYzLjcxMS0xMjIuMDQyQzMyMi44MDYsNjYuNzg2LDI1Ni4wMzIsMCwxNzMuOTIzLDAgICAgIEM5MS44MjgsMCwyNS4wNCw2Ni43ODYsMjUuMDQsMTQ4Ljg3MWMwLDUwLjk1LDI1LjcxNiw5NS45NjMsNjQuODIyLDEyMi44MUM3MCwyNzkuNzg4LDU5LjE4OSwyOTAuNjIsNTkuMTg5LDMwMi44MSAgICAgYzAsMjkuMjQ0LDU5Ljg5OCw0NS4wMzYsMTE2LjI2NSw0NS4wMzZjNTYuMzQ5LDAsMTE2LjIzNS0xNS43OTIsMTE2LjIzNS00NS4wMzYgICAgIEMyOTEuNjg4LDI5MC4xODIsMjgwLjIxMywyNzkuMDkxLDI1OS4wOTUsMjcwLjkxM3ogTTE3My41NjUsNDYuMjIyYzYuOTQ3LDAsMTIuNTU5LDUuNjI2LDEyLjU1OSwxMi41NjggICAgIGMwLDYuOTM2LTUuNjExLDEyLjU2OC0xMi41NTksMTIuNTY4Yy02LjkyNCwwLTEyLjU1Ni01LjYzMy0xMi41NTYtMTIuNTY4QzE2MS4wMDksNTEuODQ5LDE2Ni42NDIsNDYuMjIyLDE3My41NjUsNDYuMjIyeiAgICAgIE0xNzMuOTIzLDg1LjAyMmMzNS4yMjQsMCw2My44NjYsMjguNjQ4LDYzLjg2Niw2My44NTRzLTI4LjY0Myw2My44NzMtNjMuODY2LDYzLjg3M2MtMzUuMjE1LDAtNjMuODY0LTI4LjY1NS02My44NjQtNjMuODczICAgICBDMTEwLjA1OSwxMTMuNjY1LDEzOC43MDgsODUuMDIyLDE3My45MjMsODUuMDIyeiBNMTc1LjQ1NCwzMzUuMjg0Yy02NC4yMzYsMC0xMDMuNjgyLTE4LjkyMi0xMDMuNjgyLTMyLjQ3NSAgICAgYzAtNy44MywxMi4xOTMtMTYuNDQsMzEuODY4LTIyLjczM2MyMC45NTEsMTEuMjg5LDQ0Ljg4MywxNy42OSw3MC4yODksMTcuNjljMjUuODYyLDAsNTAuMTc2LTYuNjQyLDcxLjM3OS0xOC4yNzkgICAgIGMyMC42MDMsNi4yODEsMzMuODMxLDE1LjI4OCwzMy44MzEsMjMuMzIyQzI3OS4xMjcsMzE2LjM2MiwyMzkuNjg4LDMzNS4yODQsMTc1LjQ1NCwzMzUuMjg0eiIgZmlsbD0iIzAwMDAwMCIvPgoJCTwvZz4KCQk8Zz4KCQkJPHBhdGggZD0iTTE3My45MjMsMTkxLjM3OWMyMy40MzEsMCw0Mi41MDItMTkuMDY4LDQyLjUwMi00Mi40OTZjMC0yMy40MjQtMTkuMDcxLTQyLjQ5My00Mi41MDItNDIuNDkzICAgICBjLTIzLjQyOCwwLTQyLjQ4NCwxOS4wNjgtNDIuNDg0LDQyLjQ5M0MxMzEuNDM4LDE3Mi4zMTEsMTUwLjQ5NSwxOTEuMzc5LDE3My45MjMsMTkxLjM3OXoiIGZpbGw9IiMwMDAwMDAiLz4KCQk8L2c+Cgk8L2c+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPGc+CjwvZz4KPC9zdmc+Cg==",t.drawImage(i,0,0,i.width,i.height,this.model.left+.25*this.model.width,this.model.top+.25*this.model.height,.5*this.model.width,.5*this.model.height)}},{key:"drawComponentFrame",value:function(t){t.beginPath(),t.moveTo(this.model.left,this.model.top),t.lineTo(this.model.left+this.model.width,this.model.top),t.lineTo(this.model.left+this.model.width,this.model.top+this.model.height),t.lineTo(this.model.left,this.model.top+this.model.height),t.lineTo(this.model.left,this.model.top),t.stroke(),t.closePath()}},{key:"drawPlayButton",value:function(t){this.drawActionButton(t,"data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTguMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iMTZweCIgaGVpZ2h0PSIxNnB4Ij4KPHBhdGggZD0iTTI1NiwwQzExNC42MTcsMCwwLDExNC42MTUsMCwyNTZzMTE0LjYxNywyNTYsMjU2LDI1NnMyNTYtMTE0LjYxNSwyNTYtMjU2UzM5Ny4zODMsMCwyNTYsMHogTTM0NC40OCwyNjkuNTdsLTEyOCw4MCAgYy0yLjU5LDEuNjE3LTUuNTM1LDIuNDMtOC40OCwyLjQzYy0yLjY2OCwwLTUuMzQtMC42NjQtNy43NTgtMi4wMDhDMTk1LjE1NiwzNDcuMTcyLDE5MiwzNDEuODIsMTkyLDMzNlYxNzYgIGMwLTUuODIsMy4xNTYtMTEuMTcyLDguMjQyLTEzLjk5MmM1LjA4Ni0yLjgzNiwxMS4zMDUtMi42NjQsMTYuMjM4LDAuNDIybDEyOCw4MGM0LjY3NiwyLjkzLDcuNTIsOC4wNTUsNy41MiwxMy41NyAgUzM0OS4xNTYsMjY2LjY0MSwzNDQuNDgsMjY5LjU3eiIgZmlsbD0iIzAwMDAwMCIvPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8Zz4KPC9nPgo8L3N2Zz4K")}},{key:"drawStopButton",value:function(t){this.drawActionButton(t,"data:image/svg+xml;utf8;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iaXNvLTg4NTktMSI/Pgo8IS0tIEdlbmVyYXRvcjogQWRvYmUgSWxsdXN0cmF0b3IgMTguMC4wLCBTVkcgRXhwb3J0IFBsdWctSW4gLiBTVkcgVmVyc2lvbjogNi4wMCBCdWlsZCAwKSAgLS0+CjwhRE9DVFlQRSBzdmcgUFVCTElDICItLy9XM0MvL0RURCBTVkcgMS4xLy9FTiIgImh0dHA6Ly93d3cudzMub3JnL0dyYXBoaWNzL1NWRy8xLjEvRFREL3N2ZzExLmR0ZCI+CjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiBpZD0iQ2FwYV8xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA1MTIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB4bWw6c3BhY2U9InByZXNlcnZlIiB3aWR0aD0iMTZweCIgaGVpZ2h0PSIxNnB4Ij4KPHBhdGggZD0iTTI1NiwwQzExNC42MTUsMCwwLDExNC42MTUsMCwyNTZzMTE0LjYxNSwyNTYsMjU2LDI1NnMyNTYtMTE0LjYxNSwyNTYtMjU2UzM5Ny4zODUsMCwyNTYsMHogTTMzNiwzMjAgIGMwLDguODM3LTcuMTYzLDE2LTE2LDE2SDE5MmMtOC44MzcsMC0xNi03LjE2My0xNi0xNlYxOTJjMC04LjgzNyw3LjE2My0xNiwxNi0xNmgxMjhjOC44MzcsMCwxNiw3LjE2MywxNiwxNlYzMjB6IiBmaWxsPSIjMDAwMDAwIi8+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+CjxnPgo8L2c+Cjwvc3ZnPgo=")}},{key:"drawActionButton",value:function(t,i){var e=new Image;e.src=i,t.drawImage(e,0,0,e.width,e.height,this.model.left+e.width,this.model.top+this.model.height-2*e.height,e.width,e.height),this._playButtonArea={left:this.model.left+e.width,top:this.model.top+this.model.height-2*e.height,width:this.model.left+2*e.width,height:this.model.top+this.model.height-e.height}}},{key:"drawDecoded",value:function(){this._isPlaying&&this.invalidate()}},{key:"play",value:function(){this._isPlaying=!0,this._player&&this._player.client&&this._player.client.readyState===WebSocket.CLOSED&&this.reconnect()}},{key:"stop",value:function(){this._isPlaying=!1,this.invalidate()}},{key:"reconnect",value:function(){this._player?(this._player=null,this._player.stop()):this._player=null}},{key:"onchange",value:function(t,i){if(t.hasOwnProperty("url")){var e=this,M=t.url!=i.url;M&&e.reconnect()}}},{key:"onclick",value:function(t){var i=this.transcoordC2S(t.offsetX,t.offsetY),e=this._playButtonArea;i.x>=e.left&&i.x<=e.width&&i.y>=e.top&&i.y<=e.height&&(this._isPlaying?this.stop():this.play())}},{key:"onmouseenter",value:function(){this._isHover=!0}},{key:"onmouseleave",value:function(){this._isHover=!1}}]),i}(y);e["default"]=g,c.register("ws-live-video",g)},{}]},{},[1]);